Vagrant.configure("2") do |config|
  config.vm.box = "bento/ubuntu-24.04"

  config.vm.network "forwarded_port", guest: 7070, host: 9090

  config.vm.provider "virtualbox" do |vb|
    vb.memory = "2048"
  end

  config.vm.provision "shell", inline: <<-SHELL
    apt update
    apt install -y openjdk-8-jdk wget

    cd /opt
    wget https://archive.apache.org/dist/tomcat/tomcat-9/v9.0.89/bin/apache-tomcat-9.0.89.tar.gz
    tar -xvf apache-tomcat-9.0.89.tar.gz
    mv apache-tomcat-9.0.89 tomcat9

    sed -i 's/port="8080"/port="7070"/' /opt/tomcat9/conf/server.xml
    /opt/tomcat9/bin/startup.sh
  SHELL
end
